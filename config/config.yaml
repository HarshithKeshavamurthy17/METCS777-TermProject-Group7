# Wikipedia Clickstream Anomaly Detection Configuration

# Data Paths
data:
  raw_path: "data/raw"
  processed_path: "data/processed"
  anomalies_path: "data/anomalies"
  pageviews_path: "data/pageviews"
  ground_truth_path: "data/ground_truth"
  logs_path: "data/logs"
  months: ["2023-10", "2023-11"]

# Spark Configuration
spark:
  app_name: "WikipediaAnomalyDetection"
  master: "local[*]"
  driver_memory: "4g"
  executor_memory: "4g"
  partitions: 200

# ETL Settings
etl:
  min_views: 10
  filter_internal: true
  filter_special: true

# Anomaly Detection Settings
detection:
  # 1. Traffic Spike Detector (Statistical)
  statistical:
    enabled: true
    z_score_threshold: 3.5
    min_deviation_ratio: 2.0
    min_absolute_diff: 100
  
  # 2. Navigation Edge Detector (Clustering)
  clustering:
    enabled: true
    k: 10
    distance_threshold: 2.0
    features: ["n", "prev_count", "curr_count"]
  
  # 3. Mix-Shift Detector (Referrer Divergence)
  mix_shift:
    enabled: true
    js_divergence_threshold: 0.3
    top_referrer_change_threshold: 0.2

# Forecasting Settings
forecasting:
  enabled: true
  model: "prophet"  # or "arima"
  forecast_horizon: 1
  confidence_interval: 0.95
  anomaly_threshold: 2.0  # Ratio of actual/forecast_upper

# Dashboard Settings
dashboard:
  host: "0.0.0.0"
  port: 5000
  debug: true
  refresh_interval: 300  # seconds

# Evaluation Settings
evaluation:
  k: 50  # Precision@K
  ground_truth_source: "wikimedia_api"
